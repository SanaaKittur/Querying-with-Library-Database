CREATE DATABASE DB4;
USE DB4;
CREATE TABLE DEPARTMENT(
D_NO INTEGER(2) PRIMARY KEY,
D_NAME VARCHAR(10),
Mgr_SSN VARCHAR(5),
Mgr_StartDate DATE);
INSERT INTO DEPARTMENT VALUES(28,'Management','CS023','2021-06-23');
INSERT INTO DEPARTMENT VALUES(29,'Finance','CS044','2021-09-24');
INSERT INTO DEPARTMENT VALUES(30,'Sales','CS109','2021-09-07');

CREATE TABLE EMPLOYEE (
SSN VARCHAR(5) PRIMARY KEY,
EMP_NAME VARCHAR(15),
EMP_ADDRESS VARCHAR(10),
SALARY INTEGER(5),
SUPER_SSN VARCHAR(5),
D_NO INTEGER(2),
FOREIGN KEY (D_NO) REFERENCES DEPARTMENT (D_NO));
INSERT INTO EMPLOYEE VALUES('AB309','Amit Hosur','Bijapur',28000,'AB309',30);
INSERT INTO EMPLOYEE VALUES('AB310','Anand Patil','Bellary',26000,'AB310',28);
INSERT INTO EMPLOYEE VALUES('AB308','Aditya Kulkarni','Mysuru',27000,'AB308',29);
COMMIT;
UPDATE EMPLOYEE SET EMP_NAME='Anand Hosur' WHERE SSN='AB310';
SAVEPOINT A;
UPDATE EMPLOYEE SET SALARY=24000 WHERE SSN='AB309';
SAVEPOINT B;
ROLLBACK TO A;
SELECT * FROM EMPLOYEE;

CREATE TABLE D_LOCATION(
D_NO INTEGER(2),
D_LOC VARCHAR(15),
PRIMARY KEY (D_NO,D_LOC),
FOREIGN KEY (D_NO) REFERENCES DEPARTMENT (D_NO));
INSERT INTO D_LOCATION VALUES(28,'Hosur Road');
INSERT INTO D_LOCATION VALUES(29,'Kanakpura Road');
INSERT INTO D_LOCATION VALUES(30,'Indira Nagar');

CREATE TABLE PROJECT(
P_NO INTEGER(2) PRIMARY KEY,
P_NAME VARCHAR(15),
P_LOC VARCHAR(15),
D_NO INTEGER(2),
FOREIGN KEY (D_NO) REFERENCES DEPARTMENT (D_NO));
INSERT INTO PROJECT VALUES(1,'Myriad Managers','Bommanahalli',28);
INSERT INTO PROJECT VALUES(2,'Prime Financial','MG Road',29);
INSERT INTO PROJECT VALUES(3,'The Value Props','Whitefield',30);

CREATE TABLE WORKS_ON(
SSN VARCHAR(5),
P_NO INTEGER(2),
HOURS INTEGER(2),
PRIMARY KEY (SSN,P_NO),
FOREIGN KEY (SSN) REFERENCES EMPLOYEE (SSN),
FOREIGN KEY (P_NO) REFERENCES PROJECT (P_NO));
INSERT INTO WORKS_ON VALUES('AB309',1,84);
INSERT INTO WORKS_ON VALUES('AB310',2,80);
INSERT INTO WORKS_ON VALUES('AB308',3,72);

ALTER TABLE EMPLOYEE ADD(EMP_PHONE_NO INTEGER(10));
RENAME TABLE DEPARTMENT TO DEPT;




